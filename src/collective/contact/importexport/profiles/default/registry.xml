<?xml version="1.0"?>
<registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"
          i18n:domain="collective.contact.importexport">

  <record interface="collective.contact.importexport.interfaces.IPipelineConfiguration"
          name="collective.contact.importexport.pipeline">
      <field type="plone.registry.field.Text">
          <title i18n:translate="">Pipeline to use to import contacts</title>
          <key_type type="plone.registry.field.Text" />
          <value_type type="plone.registry.field.Text" />
      </field>
<value>
[transmogrifier]
pipeline =
    organizationscsv
    counter
    skipfirstline
#    breakpoint
#    portaltypeinserter
#    pathinserter
#    constructor
#    schemaupdater
    logger

[organizationscsv]
blueprint = collective.transmogrifier.sections.csvsource
filename = /srv/instances/dmsmail/Extensions/organizations-test.csv
fieldnames = _oid _pid title description organization_type use_parent_address_bool street number additional_address_details zip_code city phone cell_phone fax email website region country _uid

[counter]
blueprint = collective.contact.importexport.counter
keyname = _c

[skipfirstline]
blueprint = collective.transmogrifier.sections.condition
condition = python:item['_c'] != 0

[breakpoint]
blueprint = collective.contact.importexport.breakpoint
condition = python:item['_c'] < 3

[portaltypeinserter]
blueprint = collective.transmogrifier.sections.inserter
key = string:_type
value = string:organization

[pathinserter]
blueprint = collective.contact.importexport.pathinserter

[constructor]
blueprint = collective.transmogrifier.sections.constructor

[schemaupdater]
blueprint = transmogrify.dexterity.schemaupdater

[logger]
blueprint = collective.transmogrifier.sections.logger
name = logger
level = INFO
</value>
  </record>

</registry>
